steps:
  - name: "gcr.io/kaniko-project/executor"
    args:
      - "--dockerfile=./Dockerfile"
      - "--build-arg=REVISION_ID=${REVISION_ID}"
      - "--cache=true"
      - "--cache-ttl=24h"
      - "--destination=asia-east1-docker.pkg.dev/${PROJECT_ID}/frontend-repo/application-frontend"
  - name: "gcr.io/google.com/cloudsdktool/cloud-sdk"
    entrypoint: gcloud
    args:
      - "run"
      - "deploy"
      - "application-frontend"
      - "--image=asia-east1-docker.pkg.dev/${PROJECT_ID}/frontend-repo/application-frontend"
      - "--region=asia-east1"
      - "--platform=managed"
